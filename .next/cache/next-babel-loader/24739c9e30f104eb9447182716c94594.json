{"ast":null,"code":"var _jsxFileName = \"D:\\\\interview\\\\interview-fullstack-master\\\\components\\\\MatrixTable\\\\context.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createContext, useReducer } from 'react';\nconst emptyMatrix = {\n  \"36months\": {\n    \"lite\": 0,\n    \"standard\": 0,\n    \"unlimited\": 0\n  },\n  \"24months\": {\n    \"lite\": 0,\n    \"standard\": 0,\n    \"unlimited\": 0\n  },\n  \"12months\": {\n    \"lite\": 0,\n    \"standard\": 0,\n    \"unlimited\": 0\n  },\n  \"mtm\": {\n    \"lite\": 0,\n    \"standard\": 0,\n    \"unlimited\": 0\n  }\n};\nconst defaultState = {\n  matrix: emptyMatrix,\n  originalMatrix: emptyMatrix\n};\n\nconst saveJson = val => {\n  fetch('http://localhost:3000/api/save-pricing', {\n    method: 'post',\n    body: val,\n    headers: {\n      accept: 'application/json',\n      'content-type': 'application/json'\n    } // body: JSON.stringify(\"dfdfd\")\n\n  }).then(res => res.json()).then(data => {\n    setMatrixData(data);\n  }).catch(err => console.log('---error', err));\n}; // import fs from 'fs-extra';\n\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'GET_ALL_DATA':\n      return _objectSpread(_objectSpread({}, state), action.payload);\n\n    case 'SET_MATRIX':\n      return _objectSpread({}, state);\n\n    case 'SAVE_JSON':\n      console.log('----save:'); // saveJson();\n\n      return _objectSpread({}, state);\n\n    default:\n      return state;\n  }\n};\n\nexport const MatrixTableContext = createContext([defaultState, () => {}]);\n/**\n * This is the provider that hosts the state\n * @param param0 \n */\n\nexport const MatrixTableContextProvider = ({\n  initialMatrix,\n  children\n}) => {\n  const state = useReducer(reducer, {\n    matrix: initialMatrix || emptyMatrix,\n    originalMatrix: initialMatrix || emptyMatrix\n  });\n  return __jsx(MatrixTableContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"sources":["D:/interview/interview-fullstack-master/components/MatrixTable/context.tsx"],"names":["createContext","useReducer","emptyMatrix","defaultState","matrix","originalMatrix","saveJson","val","fetch","method","body","headers","accept","then","res","json","data","setMatrixData","catch","err","console","log","reducer","state","action","type","payload","MatrixTableContext","MatrixTableContextProvider","initialMatrix","children"],"mappings":";;;;;;;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAAoD,OAApD;AA4DA,MAAMC,WAAW,GAAG;AAClB,cAAY;AACR,YAAQ,CADA;AAER,gBAAY,CAFJ;AAGR,iBAAa;AAHL,GADM;AAMlB,cAAY;AACR,YAAQ,CADA;AAER,gBAAY,CAFJ;AAGR,iBAAa;AAHL,GANM;AAWlB,cAAY;AACR,YAAQ,CADA;AAER,gBAAY,CAFJ;AAGR,iBAAa;AAHL,GAXM;AAgBlB,SAAO;AACH,YAAQ,CADL;AAEH,gBAAY,CAFT;AAGH,iBAAa;AAHV;AAhBW,CAApB;AAuBA,MAAMC,YAA8B,GAAG;AACrCC,EAAAA,MAAM,EAAEF,WAD6B;AAErCG,EAAAA,cAAc,EAAEH;AAFqB,CAAvC;;AAKA,MAAMI,QAAQ,GAAIC,GAAD,IAAS;AACxBC,EAAAA,KAAK,CAAC,wCAAD,EAA2C;AAC5CC,IAAAA,MAAM,EAAE,MADoC;AAE5CC,IAAAA,IAAI,EAAEH,GAFsC;AAG5CI,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE,kBADH;AAEL,sBAAgB;AAFX,KAHmC,CAO1C;;AAP0C,GAA3C,CAAL,CASKC,IATL,CASUC,GAAG,IACPA,GAAG,CAACC,IAAJ,EAVN,EAYKF,IAZL,CAYUG,IAAI,IAAG;AACXC,IAAAA,aAAa,CAACD,IAAD,CAAb;AACD,GAdL,EAeKE,KAfL,CAeWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,GAAxB,CAflB;AAgBD,CAjBD,C,CAkBA;;;AAGA,MAAMG,OAAO,GAAG,CAACC,KAAD,EAA0BC,MAA1B,KAAqE;AAEnF,UAAOA,MAAM,CAACC,IAAd;AACE,SAAK,cAAL;AACE,6CACKF,KADL,GAEKC,MAAM,CAACE,OAFZ;;AAKF,SAAK,YAAL;AACE,+BACKH,KADL;;AAGF,SAAK,WAAL;AACEH,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EADF,CAEE;;AACA,+BACKE,KADL;;AAGF;AACE,aAAOA,KAAP;AAlBJ;AAoBD,CAtBD;;AAwBA,OAAO,MAAMI,kBAAkB,GAAG3B,aAAa,CAA6D,CAACG,YAAD,EAAe,MAAM,CAAE,CAAvB,CAA7D,CAAxC;AAEP;;;;;AAIA,OAAO,MAAMyB,0BAA6D,GAAG,CAAC;AAAEC,EAAAA,aAAF;AAAiBC,EAAAA;AAAjB,CAAD,KAAiC;AAC5G,QAAMP,KAAK,GAAGtB,UAAU,CAACqB,OAAD,EAAU;AAAElB,IAAAA,MAAM,EAAEyB,aAAa,IAAI3B,WAA3B;AAAwCG,IAAAA,cAAc,EAAEwB,aAAa,IAAI3B;AAAzE,GAAV,CAAxB;AAEA,SACE,MAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAEqB,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGO,QADH,CADF;AAKD,CARM","sourcesContent":["import { createContext, useReducer, useState } from 'react'\nimport { useEffect } from 'react'\n\n/**\n * This is the \n */\ninterface MatrixTableState {\n  /**\n   * This is the price matrix that contains the latest value\n   */\n  matrix: import('../../types').Matrix\n  /**\n   * We will use original matrix to help us \"reset\" the table when we want to cancel editing it.\n   * Remember that **whenever** you get the matrix from the server, you must set originalMatrix\n   * to that value; originalMatrix should try to mirror the matrix in our database.\n   */\n  originalMatrix: import('../../types').Matrix\n}\n\n/**\n * These are the actions you can dispatch. Add actions you want to help you\n * type the dispatch function\n */\ntype MatrixAction = {\n  type: 'SET_MATRIX',\n  /**\n   * When payload is empty, we will need to set the values from originalMatrix\n   */ \n  payload?: import('../../types').Matrix\n  metadata?: {\n    /**\n     * If this is set to true, then instead of resetting to the originalMatrix,\n     * we reset to the emptyMatrix\n     */\n    resetToEmpty?: boolean\n  }\n} | {\n  type: 'SET_ORIGINAL_MATRIX',\n  /**\n   * When empty, set the value from emptyMatrix\n   */\n  payload?: import('../../types').Matrix\n} | {\n  type: 'SOME_ACTION',\n  payload: any\n} | {\n  type: 'GET_ALL_DATA',\n  payload: any\n} | {\n  type: 'SAVE_JSON',\n  payload: any\n}// Here you will need to add your other action(s) in order to edit the pricing (remove SOME_ACTION)\n\n/**\n * This is for the Provider component\n */\ntype ProviderProps = {\n  initialMatrix?: import('../../types').Matrix\n}\n\nconst emptyMatrix = {\n  \"36months\": {\n      \"lite\": 0,\n      \"standard\": 0,\n      \"unlimited\": 0,\n  },\n  \"24months\": {\n      \"lite\": 0,\n      \"standard\": 0,\n      \"unlimited\": 0\n  },\n  \"12months\": {\n      \"lite\": 0,\n      \"standard\": 0,\n      \"unlimited\": 0\n  },\n  \"mtm\": {\n      \"lite\": 0,\n      \"standard\": 0,\n      \"unlimited\": 0\n  }\n}\n\nconst defaultState: MatrixTableState = {\n  matrix: emptyMatrix,\n  originalMatrix: emptyMatrix,\n}\n\nconst saveJson = (val) => {\n  fetch('http://localhost:3000/api/save-pricing', {\n      method: 'post',\n      body: val,\n      headers: {\n          accept: 'application/json',\n          'content-type': 'application/json'\n      },\n        // body: JSON.stringify(\"dfdfd\")\n      })\n      .then(res => \n        res.json()\n      )\n      .then(data=> {\n        setMatrixData(data);\n      })\n      .catch(err => console.log('---error', err))\n}\n// import fs from 'fs-extra';\n\n\nconst reducer = (state: MatrixTableState, action: MatrixAction): MatrixTableState => {\n\n  switch(action.type) {\n    case 'GET_ALL_DATA':\n      return {\n        ...state,\n        ...action.payload,\n      }\n      \n    case 'SET_MATRIX':\n      return {\n        ...state,\n      }\n    case 'SAVE_JSON':\n      console.log('----save:')\n      // saveJson();\n      return {\n        ...state\n      }\n    default:\n      return state\n  }\n}\n\nexport const MatrixTableContext = createContext<[MatrixTableState, import('react').Dispatch<MatrixAction>]>([defaultState, () => {}])\n\n/**\n * This is the provider that hosts the state\n * @param param0 \n */\nexport const MatrixTableContextProvider: import('react').FC<ProviderProps> = ({ initialMatrix, children }) => {\n  const state = useReducer(reducer, { matrix: initialMatrix || emptyMatrix, originalMatrix: initialMatrix || emptyMatrix })\n\n  return (\n    <MatrixTableContext.Provider value={state}>\n      {children}\n    </MatrixTableContext.Provider>\n  )\n}"]},"metadata":{},"sourceType":"module"}